{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { nanoid } from 'nanoid';\nexport const getTodosAsync = createAsyncThunk('todos/getTodosAsync', async () => {\n  const resp = await fetch('http://localhost:7000/todos');\n  if (resp.ok) {\n    const todos = await resp.json();\n    return {\n      todos\n    };\n  }\n});\nexport const addTodoAsync = createAsyncThunk('todos/addTodoAsync', async payload => {\n  const resp = await fetch('http://localhost:7000/todos', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      title: payload.title\n    })\n  });\n  if (resp.ok) {\n    const todo = await resp.json();\n    return {\n      todo\n    };\n  }\n});\nexport const toggleCompleteAsync = createAsyncThunk('todos/completeTodoAsync', async payload => {\n  const resp = await fetch(`http://localhost:7000/todos/${payload.id}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      completed: payload.completed\n    })\n  });\n  if (resp.ok) {\n    const todo = await resp.json();\n    return {\n      todo\n    };\n  }\n});\nexport const deleteTodoAsync = createAsyncThunk('todos/deleteTodoAsync', async payload => {\n  const resp = await fetch(`http://localhost:7000/todos/${payload.id}`, {\n    method: 'DELETE'\n  });\n  if (resp.ok) {\n    return {\n      id: payload.id\n    };\n  }\n});\nexport const todoSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    addTodo: (state, action) => {\n      const todo = {\n        id: nanoid(),\n        title: action.payload.title,\n        completed: false\n      };\n      state.push(todo);\n    },\n    toggleComplete: (state, action) => {\n      const index = state.findIndex(todo => todo.id === action.payload.id);\n      state[index].completed = action.payload.completed;\n    },\n    deleteTodo: (state, action) => {\n      return state.filter(todo => todo.id !== action.payload.id);\n    }\n  },\n  extraReducers: {\n    [getTodosAsync.fulfilled]: (state, action) => {\n      return action.payload.todos;\n    },\n    [addTodoAsync.fulfilled]: (state, action) => {\n      state.push(action.payload.todo);\n    },\n    [toggleCompleteAsync.fulfilled]: (state, action) => {\n      const index = state.findIndex(todo => todo.id === action.payload.todo.id);\n      state[index].completed = action.payload.todo.completed;\n    },\n    [deleteTodoAsync.fulfilled]: (state, action) => {\n      return state.filter(todo => todo.id !== action.payload.id);\n    }\n  }\n});\nexport const {\n  addTodo,\n  toggleComplete,\n  deleteTodo\n} = todoSlice.actions;\nexport default todoSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","nanoid","getTodosAsync","resp","fetch","ok","todos","json","addTodoAsync","payload","method","headers","body","JSON","stringify","title","todo","toggleCompleteAsync","id","completed","deleteTodoAsync","todoSlice","name","initialState","reducers","addTodo","state","action","push","toggleComplete","index","findIndex","deleteTodo","filter","extraReducers","fulfilled","actions","reducer"],"sources":["/Users/ankrit/Downloads/todoList_project/react-redux-todo-app/final/src/redux/todoSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { nanoid } from 'nanoid';\n\nexport const getTodosAsync = createAsyncThunk(\n\t'todos/getTodosAsync',\n\tasync () => {\n\t\tconst resp = await fetch('http://localhost:7000/todos');\n\t\tif (resp.ok) {\n\t\t\tconst todos = await resp.json();\n\t\t\treturn { todos };\n\t\t}\n\t}\n);\n\nexport const addTodoAsync = createAsyncThunk(\n\t'todos/addTodoAsync',\n\tasync (payload) => {\n\t\tconst resp = await fetch('http://localhost:7000/todos', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ title: payload.title }),\n\t\t});\n\n\t\tif (resp.ok) {\n\t\t\tconst todo = await resp.json();\n\t\t\treturn { todo };\n\t\t}\n\t}\n);\n\nexport const toggleCompleteAsync = createAsyncThunk(\n\t'todos/completeTodoAsync',\n\tasync (payload) => {\n\t\tconst resp = await fetch(`http://localhost:7000/todos/${payload.id}`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ completed: payload.completed }),\n\t\t});\n\n\t\tif (resp.ok) {\n\t\t\tconst todo = await resp.json();\n\t\t\treturn { todo };\n\t\t}\n\t}\n);\n\nexport const deleteTodoAsync = createAsyncThunk(\n\t'todos/deleteTodoAsync',\n\tasync (payload) => {\n\t\tconst resp = await fetch(`http://localhost:7000/todos/${payload.id}`, {\n\t\t\tmethod: 'DELETE',\n\t\t});\n\n\t\tif (resp.ok) {\n\t\t\treturn { id: payload.id };\n\t\t}\n\t}\n);\n\nexport const todoSlice = createSlice({\n\tname: 'todos',\n\tinitialState: [],\n\treducers: {\n\t\taddTodo: (state, action) => {\n\t\t\tconst todo = {\n\t\t\t\tid: nanoid(),\n\t\t\t\ttitle: action.payload.title,\n\t\t\t\tcompleted: false,\n\t\t\t};\n\t\t\tstate.push(todo);\n\t\t},\n\t\ttoggleComplete: (state, action) => {\n\t\t\tconst index = state.findIndex((todo) => todo.id === action.payload.id);\n\t\t\tstate[index].completed = action.payload.completed;\n\t\t},\n\t\tdeleteTodo: (state, action) => {\n\t\t\treturn state.filter((todo) => todo.id !== action.payload.id);\n\t\t},\n\t},\n\textraReducers: {\n\t\t[getTodosAsync.fulfilled]: (state, action) => {\n\t\t\treturn action.payload.todos;\n\t\t},\n\t\t[addTodoAsync.fulfilled]: (state, action) => {\n\t\t\tstate.push(action.payload.todo);\n\t\t},\n\t\t[toggleCompleteAsync.fulfilled]: (state, action) => {\n\t\t\tconst index = state.findIndex(\n\t\t\t\t(todo) => todo.id === action.payload.todo.id\n\t\t\t);\n\t\t\tstate[index].completed = action.payload.todo.completed;\n\t\t},\n\t\t[deleteTodoAsync.fulfilled]: (state, action) => {\n\t\t\treturn state.filter((todo) => todo.id !== action.payload.id);\n\t\t},\n\t},\n});\n\nexport const { addTodo, toggleComplete, deleteTodo } = todoSlice.actions;\n\nexport default todoSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}